#!/bin/sh

. ./defs

set -e

./explicit > stdout

cat >expected <<EOF
digraph G {
  0 [label="", style=invis, height=0]
  0 -> 1
  1 [label="state 0"]
  1 -> 2 [label="T\n<Acc[p]:0, Acc[q]:1, Acc[r]:0><Acc[p]:1, Acc[q]:0, Acc[r]:0>"]
  2 [label="state 1"]
  2 -> 3 [label="<a:1>\n<Acc[p]:0, Acc[q]:0, Acc[r]:1>"]
  3 [label="state 2"]
  3 -> 1 [label="<b:1, c:1>\nF"]
}
EOF

diff stdout expected

rm stdout expected

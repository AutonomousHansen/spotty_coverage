#!/bin/sh

. ./defs

set -e

cat >input <<EOF
s1, "s2", a!b, c d;
"s2", "state 3", a, !c;
"state 3", s1,,;
EOF

./tgbaread input > stdout

cat >expected <<EOF
digraph G {
  size="7.26,10.69"
  0 [label="", style=invis]
  1 [label="s1"]
  0 -> 1
  2 [label="s2"]
  1 -> 2 [label="<a:1, b:0>\n<Prom[c]:1, Prom[d]:1>"]
  3 [label="state 3"]
  2 -> 3 [label="<a:1>\n<Prom[c]:0>"]
  3 -> 1 [label="T\nT"]
}
EOF

diff stdout expected

rm input stdout expected

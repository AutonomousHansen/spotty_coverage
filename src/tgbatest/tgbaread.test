#!/bin/sh

. ./defs

set -e

cat >input <<EOF
acc = c d;
s1, "s2", a!b, c d;
"s2", "state 3", a, c;
"state 3", s1,,;
EOF

./tgbaread input > stdout

cat >expected <<EOF
digraph G {
  size="7.26,10.69"
  0 [label="", style=invis]
  0 -> 1
  1 [label="s1"]
  1 -> 2 [label="<a:1, b:0>\n<Acc[c]:0, Acc[d]:1><Acc[c]:1, Acc[d]:0>"]
  2 [label="s2"]
  2 -> 3 [label="<a:1>\n<Acc[c]:1, Acc[d]:0>"]
  3 [label="state 3"]
  3 -> 1 [label="T\nF"]
}
EOF

diff stdout expected

rm input stdout expected
